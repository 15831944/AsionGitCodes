<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- 這篇文章由Dancingwind翻譯，作者的聯繫方式zhouwei02@mails.tsinghua.edu.cn -->
<HTML>
<!-- Mirrored from www.alucardma.com/dancingwind/OpenGL/Nehe/Course/Tutorial_43.htm by HTTrack Website Copier/3.x [XR&CO'2006], Sat, 25 Nov 2006 10:05:04 GMT -->
<HEAD><TITLE>NeHe OpenGL教程第四十三課，DancingWind翻譯</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<style type=text/css>
A:active {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:link {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:visited {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff; TEXT-DECORATION: none
}
A:hover {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #ffda6a; TEXT-DECORATION: none
}
BODY {
	COLOR: #ffffff; BACKGROUND-COLOR: #000000
}
TD IMG {
	DISPLAY: block
}
.back {
	BACKGROUND: #000022; COLOR: #ffffff
}
.back2 {
	BACKGROUND: #000000; COLOR: #ffffff
}
.back3 {
	BACKGROUND: #000022; COLOR: #ffffff
}
.copy {
	FONT-SIZE: 11px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.head {
	FONT: bold 13px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.link {
	FONT-SIZE: 14px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.menu {
	FONT: bold 17px Tahoma, Verdana, sans-serif; TEXT-DECORATION: none
}
.news {
	BACKGROUND: #00008b; COLOR: #ffffff
}
.tab {
	PADDING-LEFT: 35px
}
.text {
	FONT-SIZE: 12px; LINE-HEIGHT: normal; FONT-STYLE: normal; FONT-FAMILY: Tahoma, Verdana, sans-serif; FONT-VARIANT: normal; TEXT-DECORATION: none
}
.theme {
	BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: #bbccff
}
.dotted {
	BORDER-RIGHT: #00008b 2px dotted; BORDER-TOP: #00008b 2px dotted; BORDER-LEFT: #00008b 2px dotted; BORDER-BOTTOM: #00008b 2px dotted
}
.solid {
	BORDER-RIGHT: #ffffff 1px solid; BORDER-TOP: #ffffff 1px solid; BORDER-LEFT: #ffffff 1px solid; BORDER-BOTTOM: #ffffff 1px solid
}
.logo {
	BACKGROUND-IMAGE: url(../graphics/rgb/logo.html)
}
.menubar {
	BACKGROUND-IMAGE: url(../graphics/rgb/menubar.html)
}
.menubg {
	BACKGROUND-IMAGE: url(../graphics/rgb/menubg.html)
}
.menuheading {
	BACKGROUND-IMAGE: url(../graphics/rgb/menuheading.html)
}
.nehebutton {
	BACKGROUND-IMAGE: url(../graphics/rgb/nehebutton.html)
}
.newslogo {
	BACKGROUND-IMAGE: url(../graphics/rgb/newslogo.html)
}
.tinylogo {
	BACKGROUND-IMAGE: url(../graphics/rgb/border/tinylogo.html)
}
.bc {
	BACKGROUND-IMAGE:  url(../Pic/bc.png)
}
.bl {
	BACKGROUND-IMAGE:  url(../Pic/bl.png)
}
.br {
	BACKGROUND-IMAGE:  url(../Pic/br.png)
}
.c {
	BACKGROUND-IMAGE: url(../Picc.html)
}
.l {
	BACKGROUND-IMAGE:  url(../Pic/l.png)
}
.lc {
	BACKGROUND-IMAGE: url(../Piclc.html)
}
.r {
	BACKGROUND-IMAGE:  url(../Pic/r.png)
}
.rc {
	BACKGROUND-IMAGE: url(../Picrc.html)
}
.tc {
	BACKGROUND-IMAGE:  url(../Pic/tc.png)
}
.tl {
	BACKGROUND-IMAGE:  url(../Pic/tl.png)
}
.tr {
	BACKGROUND-IMAGE:  url(../Pic/tr.png)
}

</style>
</head>
<BODY text=white vLink=#aaccff link=#aaccff bgColor=black>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tinylogo width=326 height=130><IMG height=130 
      alt="NeHe Productions" 
      src="../Pic/logo.png" width=326></TD>
      <TD vAlign=center align=middle><div align="center"><FONT class=text><FONT class=theme 
      size=+3><B><I>第43課</I></B></FONT></FONT></div></TD>
  </TR></TBODY></TABLE>
 <!-- 上邊框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="../Pic/tl.jpg" width="28"></td>
    <td width="100%"><img height="28" src="../Pic/tc.gif" width="100%"></td>
    <td><img height="28" src="../Pic/tr.gif" width="28"></td>
  </tr>
</TBODY>
</table>

<!-- 中部-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
  	<!-- 中部左邊框-->
    <td  background="../Pic/l.gif"><img src="../Pic/l.gif" width="28" height="28"></td>
	<!-- 中部文字部分-->
    <td vAlign="top" width="100%">
	<table width="100%" border="0">
          <tr>
            <td width="29%"><img src="../Pic/lesson43.jpg" width="240" height="180"></td>
            <td width="71%"><p><b><font ><b>在OpenGL中使用FreeType庫</b></font></b></p>
              <p><font size="3">使用FreeType庫可以創建非常好看的反走樣的字體，記住暴雪公司就是使用這個庫的，就是那個做魔獸世界的。嘗試一下吧，我只告訴你了基本的使用方式，你可以走的更遠。</font></p></td>
          </tr>
     </table>
      </td>
	<!-- 中部右邊框-->
    <td background="../Pic/r.gif"><img src="../Pic/r.gif" width="28" height="28"></td>
  </tr>
</TBODY>
</table>

<!-- 下邊框-->
<table border="0" cellPadding="0" cellSpacing="0" width="100%">
<TBODY>
  <tr>
    <td><img height="28" src="../Pic/bl.gif" width="28"></td>
    <td width="100%"><img height="28" src="../Pic/bc.gif" width="100%"></td>
    <td><img height="28" src="../Pic/br.gif" width="28"></td>
  </tr>
</TBODY>
</table> 
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=back3 vAlign=top width="100%"> 
      <p align="center"><font size="4">在OpenGL中使用FreeType庫</font></p>
        <p>這裡是一個快速的介紹，它告訴你如何在OpenGL中使用FreeType渲染TrueType字體。使用這個庫我們可以渲染反走樣的文本，它看起來更加的漂亮。</p>
        <p><b>動機</b></p>
        <p><font size="3">這裡我將給你兩個例子，一個是用WGL的bitmap字體渲染得文字，另一個是用FreeType渲染得文字。</font> 
        </p>
      <p>
          <p><center><img src="../Pic/foo_foo.gif" width="158" height="37"> </center></p>
          
        <p><font size="3">使用WGl渲染得文字是一些圖像，當你放大它們時看起來如下：</font></p>
          <p></p>
      <center>
        <p><img src="../Pic/wgl.gif" width="185" height="85"> </p>
          <p align="left"><font size="3">如果你使用GNU的FreeType庫（暴雪公司也在它們的遊戲中使用這個庫），它將看起來更漂亮，如下所示，它具有了反走樣：</font></p>
          <p><img src="../Pic/free.gif" width="196" height="85"></p>
          <p align="left"><b>創建程序</b></p>
          <p align="left">第一步你需要從下面的網站上下載FreeType庫：<a href="http://gnuwin32.sourceforge.net/packages/freetype.htm">http://gnuwin32.sourceforge.net/packages/freetype.htm</a> 
          </p>
          <p align="left">接著在你使用它創建一個新的程序時，你需要鏈接libfreetype.lib庫，並包含FreeType的頭文件。</p>
          <p align="left">　</p>
      </center></TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">現在我們已經能創建基於FreeType的程序了，但我們還不能運行它，因為我們需要freetype-6.dll文件。 
        <p>好了，現在我們可以開始編寫我們的程序了，我們從13課的代碼開始，我們添加兩個新的文件&quot;freetype.cpp&quot;和&quot;freetype.h&quot;。我們把和FreeType相關的內容放在這兩個文件裡。</p>
        <p>好了，讓我們從freetype.h開始吧。</p>
        <p>按慣例我們包含一些需要的頭文件</p>
    </TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>#ifndef FREE_NEHE_H<br>#define FREE_NEHE_H</PRE>
<p><span class="theme">//FreeType 頭文件</span><br>
  #include &lt;ft2build.h&gt;<br>
  #include &lt;freetype/freetype.h&gt;<br>
  #include &lt;freetype/ftglyph.h&gt;<br>
  #include &lt;freetype/ftoutln.h&gt;<br>
  #include &lt;freetype/fttrigon.h&gt;</p>
<p><span class="theme">//OpenGL 頭文件</span><br>
  #include &lt;windows.h&gt; <br>
  #include &lt;GL/gl.h&gt;<br>
  #include &lt;GL/glu.h&gt;</p>
<p><span class="theme">//STL 頭文件</span><br>
  #include &lt;vector&gt;<br>
  #include &lt;string&gt;</p>
<p><span class="theme">//STL異常類</span><br>
  #include &lt;stdexcept&gt;<br>
  #pragma warning(disable: 4786)</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">我們將把每個字符需要的信息封裝在一個結構中，這樣就像使用WGL字體一樣，我們可以分別控制每個字符的顯示狀態。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 把所有的操作放在名字空間freetype中，這樣可以避免與其他函數的衝突</span><br>namespace freetype 
{</PRE>
<p><span class="theme">// 使用vector和string名字空間</span><br>
  using std::vector;<br>
  using std::string;</p>
<p><span class="theme">// 這個結構保存字體信息 </span><br>
  struct font_data <br>
  {<br>
  float h; <span class="theme">// 字體的高度</span><br>
  GLuint * textures; <span class="theme">// 使用的紋理 </span><br>
  GLuint list_base; <span class="theme">// 顯示列表的值</span></p>
<p> <span class="theme">// 初始化結構</span><br>
  void init(const char * fname, unsigned int h);</p>
<p> <span class="theme">// 清楚所有的資源</span><br>
  void clean();<br>
  };</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">最後一件事是定義我們輸出字符串的原形:</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 把字符輸出到屏幕</span><br>void print(const font_data &amp;ft_font, float x, float y, const char *fmt, ...);</PRE>
<p>} </p>
<p>#endif</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">上面就是FreeType的頭文件，下面我們看看怎樣實現它</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>#include &quot;freetype.h&quot;</PRE>
<p>namespace freetype {</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">我們使用紋理去顯示字符，在OpenGL中紋理大小必須為2的次方，這個函數用來字符的大小近似到這個值。所以我們有了如下的方程：</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 這個函數返回比a大的，並且是最接近a的2的次方的數</span><br>inline int next_p2 (int a )<br>{<br>	int rval=1;<br>	// rval&lt;&lt;=1 Is A Prettier Way Of Writing rval*=2; <br>	while(rval&lt;a) rval&lt;&lt;=1;<br>	return rval;<br>}</PRE>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面一個函數為make_dlist, 它是這個代碼的核心。它包含FT_Face對象，它是FreeType用來保存字體信息的類，接著創建一個顯示列表。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 為給定的字符創建一個顯示列表</span><br>void make_dlist ( FT_Face face, char ch, GLuint list_base, GLuint * tex_base ) {</PRE>
<p> <span class="theme">// 載入給定字符的輪廓</span><br>
  if(FT_Load_Glyph( face, FT_Get_Char_Index( face, ch ), FT_LOAD_DEFAULT ))<br>
  throw std::runtime_error(&quot;FT_Load_Glyph failed&quot;);</p>
<p> <span class="theme">// 保存輪廓對像</span><br>
  FT_Glyph glyph;<br>
  if(FT_Get_Glyph( face-&gt;glyph, &amp;glyph ))<br>
  throw std::runtime_error(&quot;FT_Get_Glyph failed&quot;);</p>
<p> <span class="theme">// 把輪廓轉化為位圖</span><br>
  FT_Glyph_To_Bitmap( &amp;glyph, ft_render_mode_normal, 0, 1 );<br>
  FT_BitmapGlyph bitmap_glyph = (FT_BitmapGlyph)glyph;</p>
<p> <span class="theme">// 保存位圖</span><br>
  FT_Bitmap&amp; bitmap=bitmap_glyph-&gt;bitmap;</p>
<PRE>
}
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">現在我們已經從FreeType中獲得了位圖，我們需要把它轉化為一個滿足OpenGL紋理要求的位圖。你必須知道，在OpenGL中位圖表示黑白的數據，而在FreeType中我們使用8位的顏色表示位圖，所以FreeType的位圖可以保存亮度信息。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 轉化為OpenGl可以使用的大小</span><br>	int width = next_p2( bitmap.width );<br>	int height = next_p2( bitmap.rows );</PRE>
<p> <span class="theme">// 保存位圖數據</span><br>
  GLubyte* expanded_data = new GLubyte[ 2 * width * height];</p>
<p> <span class="theme">// 這裡我們使用8位表示亮度8位表示alpha值</span><br>
  for(int j=0; j &lt;height;j++) {<br>
  for(int i=0; i &lt; width; i++){<br>
  expanded_data[2*(i+j*width)]= expanded_data[2*(i+j*width)+1] = <br>
  (i&gt;=bitmap.width || j&gt;=bitmap.rows) ?<br>
  0 : bitmap.buffer[i + bitmap.width*j];<br>
  }<br>
  }</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">接下來我們選則字體紋理，並生成字體的貼圖紋理</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 設置字體紋理的紋理過濾器</span><br>	glBindTexture( GL_TEXTURE_2D, tex_base[ch]);<br>	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);<br>	glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);</PRE>
<p> <span class="theme">// 邦定紋理</span><br>
  glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0,<br>
  GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, expanded_data );</p>
<p> <span class="theme">// 釋放分配的內存</span><br>
  delete [] expanded_data;<br>
</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">接著創建一個顯示列表，它用來繪製一個字符</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 創建顯示列表</span><br>	glNewList(list_base+ch,GL_COMPILE);</PRE>
<p> glBindTexture(GL_TEXTURE_2D,tex_base[ch]);</p>
<p> <span class="theme">//首先我們向左移動一點</span><br>
  glTranslatef(bitmap_glyph-&gt;left,0,0);</p>
<p> <span class="theme">//接著我們向下移動一點，這只隊'g','y'之類的字符有用<br>
  //它使得所有的字符都有一個基線</span><br>
  glPushMatrix();<br>
  glTranslatef(0,bitmap_glyph-&gt;top-bitmap.rows,0);</p>
<p> <span class="theme">// 計算位圖中字符圖像的寬度</span><br>
  float x=(float)bitmap.width / (float)width,<br>
  y=(float)bitmap.rows / (float)height;</p>
<p> <span class="theme">//繪製一個正方形，顯示字符</span><br>
  glBegin(GL_QUADS);<br>
  glTexCoord2d(0,0); glVertex2f(0,bitmap.rows);<br>
  glTexCoord2d(0,y); glVertex2f(0,0);<br>
  glTexCoord2d(x,y); glVertex2f(bitmap.width,0);<br>
  glTexCoord2d(x,0); glVertex2f(bitmap.width,bitmap.rows);<br>
  glEnd();<br>
  glPopMatrix();<br>
  glTranslatef(face-&gt;glyph-&gt;advance.x &gt;&gt; 6 ,0,0);</p>
<p> <span class="theme">//結束顯示列表的繪製</span><br>
  glEndList();<br>
  }<br>
</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面的函數將使用make_dlist創建一個字符集的顯示列表，fname為你要使用的FreeType字符文件。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>void font_data::init(const char * fname, unsigned int h) {<br><span class="theme">		// 保存紋理ID.</span><br>	textures = new GLuint[128];</PRE>
<p> this-&gt;h=h;</p>
<p> <span class="theme">// 創建FreeType庫</span><br>
  FT_Library library;<br>
  if (FT_Init_FreeType( &amp;library )) <br>
  throw std::runtime_error(&quot;FT_Init_FreeType failed&quot;);</p>
<p> <span class="theme">// 在FreeType庫中保存字體信息的類叫做face</span><br>
  FT_Face face;</p>
<p> <span class="theme">// 使用你輸入的Freetype字符文件初始化face類</span><br>
  if (FT_New_Face( library, fname, 0, &amp;face )) <br>
  throw std::runtime_error(&quot;FT_New_Face failed (there is probably a problem 
  with your font file)&quot;);</p>
<p> <span class="theme">// 在FreeType中使用1/64作為一個像素的高度所以我們需要縮放h來滿足這個要求</span><br>
  FT_Set_Char_Size( face, h &lt;&lt; 6, h &lt;&lt; 6, 96, 96);</p>
<p> <span class="theme">// 創建128個顯示列表</span><br>
  list_base=glGenLists(128);<br>
  glGenTextures( 128, textures );<br>
  make_dlist(face,i,list_base,textures);</p>
<p> <span class="theme">// 釋放face類</span><br>
  FT_Done_Face(face);</p>
<p> <span class="theme">// 釋放FreeType庫</span><br>
  FT_Done_FreeType(library);<br>
  }</p>
<p></p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l height="133"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%" height="133">下面的函數完成釋放資源的工作</TD>
      <TD class=r height="133"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD>
  </TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>void font_data::clean() {<br>	glDeleteLists(list_base,128);<br>	glDeleteTextures(128,textures);<br>	delete [] textures;}</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">在print函數中要用到下面的兩個方程，pushScreenCoordinateMatrix函數用來保存當前的矩陣，並設置視口與當前的窗口大小匹配。pop_projection_matrix函數用來返回pushScreenCoordinateMatrix保存的矩陣。reference 
        manual. </TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 保存當前的矩陣，並設置視口與當前的窗口大小匹配</span><br>inline void pushScreenCoordinateMatrix() {<br>	glPushAttrib(GL_TRANSFORM_BIT);<br>	GLint   viewport[4];<br>	glGetIntegerv(GL_VIEWPORT, viewport);<br>	glMatrixMode(GL_PROJECTION);<br>	glPushMatrix();<br>	glLoadIdentity();<br>	gluOrtho2D(viewport[0],viewport[2],viewport[1],viewport[3]);<br>	glPopAttrib();<br>}</PRE>
<p><span class="theme">//返回pushScreenCoordinateMatrix保存的矩陣</span><br>
  inline void pop_projection_matrix() {<br>
  glPushAttrib(GL_TRANSFORM_BIT);<br>
  glMatrixMode(GL_PROJECTION);<br>
  glPopMatrix();<br>
  glPopAttrib();<br>
</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">我們的print函數和13課的函數非常的像，但在實現上有一些不同。我們實際上是使用2通道的紋理而不是圖像。</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE><span class="theme">// 輸出文字</span><br>void print(const font_data &amp;ft_font, float x, float y, const char *fmt, ...)  {<br>        <br><span class="theme">		// 保存當前矩陣</span><br>	pushScreenCoordinateMatrix();                                   <br>        <br>	GLuint font=ft_font.list_base;<br>	float h=ft_font.h/.63f;                                                 <br>	char	text[256];									<br>	va_list	ap;										</PRE>
<p> if (fmt == NULL) <br>
  *text=0; <br>
  else {<br>
  va_start(ap, fmt); <br>
  vsprintf(text, fmt, ap); <br>
  va_end(ap); <br>
  }</p>
<p> <span class="theme">// 把輸入的字符串按回車分割</span><br>
  const char *start_line=text;<br>
  vector&lt;string&gt; lines;<br>
  for(const char *c=text;*c;c++) {<br>
  if(*c=='\n') {<br>
  string line;<br>
  for(const char *n=start_line;n&lt;c;n++) line.append(1,*n);<br>
  lines.push_back(line);<br>
  start_line=c+1;<br>
  }<br>
  }<br>
  if(start_line) {<br>
  string line;<br>
  for(const char *n=start_line;n&lt;c;n++) line.append(1,*n);<br>
  lines.push_back(line);<br>
  }</p>
<p> glPushAttrib(GL_LIST_BIT | GL_CURRENT_BIT | GL_ENABLE_BIT | GL_TRANSFORM_BIT); 
  <br>
  glMatrixMode(GL_MODELVIEW);<br>
  glDisable(GL_LIGHTING);<br>
  glEnable(GL_TEXTURE_2D);<br>
  glDisable(GL_DEPTH_TEST);<br>
  glEnable(GL_BLEND);<br>
  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); </p>
<p> glListBase(font);</p>
<PRE>	float modelview_matrix[16];     <br>	glGetFloatv(GL_MODELVIEW_MATRIX, modelview_matrix);</PRE>
<p> <span class="theme">// 下面的代碼完成具體的繪製過程</span> <br>
  for(int i=0;i&lt;lines.size();i++) {<br>
  glPushMatrix();<br>
  glLoadIdentity();<br>
  glTranslatef(x,y-h*i,0);<br>
  glMultMatrixf(modelview_matrix);</p>
<p> <span class="theme">//調用顯示列表繪製 </span><br>
  glCallLists(lines[i].length(), GL_UNSIGNED_BYTE, lines[i].c_str());</p>
<p> glPopMatrix();<br>
  }</p>
<p> glPopAttrib(); </p>
<p> pop_projection_matrix();<br>
  }</p>
<p>} <br>
</p>
<PRE>
}
</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">FreeType庫我們就寫好了，現我們在13課的代碼上來做一些修改，當然首先我們需要包含freetype.h的頭文件</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>#include &quot;freetype.h&quot;</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">現在我們就可以調用freetype庫繪製字符串了</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>// 保存我們創建的字體的信息<br>freetype::font_data our_font;</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">接下來使用test.ttf文件初始化字體</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>our_font.init(&quot;Test.ttf&quot;, 16);</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">在程序結束時記得釋放內存資源</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>our_font.clean();</PRE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%">下面是我們具體的繪製函數</TD>
    <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<PRE>int DrawGLScene(GLvoid)										<br>{<br>	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);					<br>	glLoadIdentity();									<br>	glTranslatef(0.0f,0.0f,-1.0f);							</PRE>
<p> <span class="theme">// 藍色文字</span><br>
  glColor3ub(0,0,0xff);</p>
<p> <span class="theme">// 繪製WGL文字</span><br>
  glRasterPos2f(-0.40f, 0.35f);<br>
  glPrint(&quot;Active WGL Bitmap Text With NeHe - %7.2f&quot;, cnt1); </p>
<p> <span class="theme">// 紅色文字</span><br>
  glColor3ub(0xff,0,0);</p>
<p> glPushMatrix();<br>
  glLoadIdentity();<br>
  glRotatef(cnt1,0,0,1);<br>
  glScalef(1,.8+.3*cos(cnt1/5),1);<br>
  glTranslatef(-180,0,0);<br>
  <span class="theme">//繪製freetype文字 </span><br>
  freetype::print(our_font, 320, 200, &quot;Active FreeType Text - %7.2f&quot;, 
  cnt1);<br>
  glPopMatrix();</p>
<p> cnt1+=0.051f; <br>
  cnt2+=0.005f; <br>
  return TRUE; <span class="theme">// 成功返回</span><br>
  }</p>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=tl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=tc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
    width="100%"></TD>
    <TD class=tr><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
    <TR> 
      <TD class=l><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
      <TD class=back3 vAlign=top width="100%"><p>最後我們介紹一些實用的創建字體的相關站點</p>
        <p>OGLFT 非常漂亮的基於FreeType2的字體庫，下面是它的站點<a href="http://oglft.sourceforge.net/">http://oglft.sourceforge.net</a>. 
        </p>
        <p>FTGL 是為OS X設計的第三方字體庫. <a href="http://homepages.paradise.net.nz/henryj/code/#FTGL">http://homepages.paradise.net.nz/henryj/code/#FTGL.</a> 
        </p>
        <p>FNT 一個非FreeType庫，它使用自己定義的字體格式，但它具有非常好的界面<a href="http://plib.sourceforge.net/fnt">http://plib.sourceforge.net/fnt</a>.</p>
<table width="100%" border="1">
  <tr>
    <td width="27%"><img src="../images/logo%203.jpg" width="209" height="200" align="middle"></td>
    <td width="73%">版權與使用聲明:<br>
      我是個對學習和生活充滿激情的普通男孩,在網絡上我以DancingWind為暱稱，我的聯繫方式是zhouwei02@mails.tsinghua.edu.cn，如果你有任何問題，都可以聯繫我。
      <p>引子<br>
        網絡是一個共享的資源，但我在自己的學習生涯中浪費大量的時間去搜索可用的資料，在現實生活中花費了大量的金錢和時間在書店中尋找資料，於是我給自己起了個暱稱DancingWind，其意義是想風一樣從各個知識的站點中吸取成長的養料。在飄蕩了多年之後，我決定把自己收集的資料整理為一個統一的資源庫。</p>
      <p>版權聲明<br>
        所有DancingWind發表的內容，大多都來自共享的資源，所以我沒有資格把它們據為己有，或聲稱自己為這些資源作出了一點貢獻。故任何人都可以複製，修改，重新發表，甚至以自己的名義發表，我都不會追究，但你在做以上事情的時候必須保證內容的完整性，給後來的人一個完整的教程。最後，任何人不能以這些資料的任何部分，謀取任何形式的報酬。</p>
      <p>發展計劃<br>
        在國外，很多資料都是很多人花費幾年的時間慢慢積累起來的。如果任何人有興趣與別人共享你的知識，我很歡迎你與我聯繫，但你必須同意我上面的聲明。</p>
              <p>感謝<br>
                感謝我的母親一直以來對我的支持和在生活上的照顧。<br>
                感謝我深愛的女友田芹，一直以來默默的在精神上和生活中對我的支持，她甚至把買衣服的錢都用來給我買書了，她真的是我見過的最好的女孩，希望我能帶給她幸福。</p>
              <p>資源下載: <br>
                文檔 <a href="http://www.alucardma.com/dancingwind/OpenGL/Nehe/Res/mht/NeHe%20OpenGL%20Chinese%20Course%2043.mht">網頁格式</a> 
                <a href="http://www.alucardma.com/dancingwind/OpenGL/Nehe/Res/pdf/OpenGL_Nehe_Course_Tutorial_43.pdf">PDF格式</a><br>
                源碼 <a href="http://www.alucardma.com/dancingwind/OpenGL/Nehe/Res/Src/43_FreeTypeFont.rar">RAR格式</a></p></td>
  </tr>
</table>
        <FONT class=text>
        <TABLE width="100%" border=0>
          <TBODY>
            <TR> 
              <TD align=left width="50%"><B><FONT size=-1><A 
            href="Tutorial_42.html">&lt; 第42課</A></FONT></B></TD>
              <TD align=right width="50%"><B><FONT 
        size=-1><a href="Tutorial_44.html">第44課 &gt;&nbsp;</a></FONT></B></TD>
            </TR>
          </TBODY>
        </TABLE>
        </FONT> </TD>
      <TD class=r><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD>
    </TR>
  </TBODY>
</TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=bl><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=bc width="100%"><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" width=28></TD>
    <TD class=br><IMG height=28 alt="" 
      src="../Pic/blank(1).gif" 
  width=28></TD></TR></TBODY></TABLE>
</BODY>
<!-- Mirrored from www.alucardma.com/dancingwind/OpenGL/Nehe/Course/Tutorial_43.htm by HTTrack Website Copier/3.x [XR&CO'2006], Sat, 25 Nov 2006 10:05:07 GMT -->
</HTML>
